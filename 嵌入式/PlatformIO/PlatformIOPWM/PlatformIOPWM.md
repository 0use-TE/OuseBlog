### PlatformIOPWM

#### ä»‹ç»

PWMåœ¨åµŒå…¥å¼å¼€å‘ä¸­éå¸¸é‡è¦ï¼Œå¯ä»¥ç”¨äºç”µæœºè°ƒé€Ÿï¼Œå‘¼å¸ç¯ç­‰

### Api

é…ç½®pwmçš„apiä¸»è¦æœ‰ä¸¤ç±»ï¼Œå¯¹äºç®€å•çš„åœºæ™¯(ä¾‹å¦‚ç”µæœºè°ƒé€Ÿ)å’Œæ–°ä¸€ç‚¹çš„èŠ¯ç‰‡å¯ä»¥ä½¿ç”¨ç¬¬ä¸€ç§ï¼Œå› ä¸ºå®ƒä½¿ç”¨éå¸¸ç®€å•ï¼Œåªéœ€è¦ä¼ å…¥å¼•è„šå’Œå ç©ºæ¯”

```c
void analogWrite(uint8_t pin,int val); 
//ç¬¬ä¸€ä¸ªå‚æ•°ä¸ºå¼•è„šï¼Œç¬¬äºŒä¸ªæ˜¯å ç©ºæ¯”ï¼Œå¯¹äºå¤§å¤šæ•°èŠ¯ç‰‡ï¼Œvalçš„èŒƒå›´æ˜¯0åˆ°255ï¼Œéƒ¨åˆ†å¦‚esp8266çš„èŒƒå›´æ˜¯0åˆ°1023ï¼Œå› æ­¤å…·ä½“èŒƒå›´è¯·ä¸Šç½‘æŸ¥è¯¢

//ä¾‹ï¼šè®¾ç½®å¼•è„šå››50%çš„å ç©ºæ¯”
void setup() {
   pinMode(4,OUTPUT)//å¯é€‰ä½†å»ºè®®!
}

void loop() {
  analogWrite(4, 128); // GPIO 4 è¾“å‡º 50% å ç©ºæ¯”
}
```

å¯¹äºå¤æ‚çš„åœºæ™¯ï¼Œæ¯”å¦‚èˆµæœºï¼Œé«˜ç²¾åº¦è°ƒé€Ÿï¼ŒéŸ³é¢‘ï¼Œå»ºè®®ä½¿ç”¨ledcWrite
è§„åˆ™ä¸º:**è®¾ç½®å®šæ—¶å™¨ -> ç»‘å®šé€šé“ -> ç»‘å®šå¼•è„š -> è¾“å‡ºä¿¡å·**ã€‚

```c
// 1. å®šä¹‰ PWM å‚æ•°
const int freq = 5000;    // é¢‘ç‡ 5000Hz
const int ledChannel = 0; // ä½¿ç”¨é€šé“ 0
const int resolution = 8; // åˆ†è¾¨ç‡ 8 ä½ (0-255)

void setup() {
  // 2. é…ç½® LEDC å®šæ—¶å™¨å’Œé€šé“
  ledcSetup(ledChannel, freq, resolution);
  
  // 3. å°†é€šé“ç»‘å®šåˆ° GPIO å¼•è„š
  ledcAttachPin(18, ledChannel);
}

void loop() {
  // 4. æ§åˆ¶è¾“å‡º
  ledcWrite(ledChannel, 128); // åœ¨é€šé“ 0 ä¸Šè¾“å‡ºå ç©ºæ¯”
}
```

#### ç»“è¯­

è¿™ä¸æ¯”keilçˆ½å¤šäº†ğŸ˜‹ğŸ˜‹ğŸ˜‹